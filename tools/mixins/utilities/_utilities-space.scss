/*
=================================================
Modules
================================================= 
*/
@use "sass:meta";
@use "sass:map";
@use "../layout/breakpoint" as *;

/*
=================================================
Space
================================================= 
*/
@mixin utilities-space($prefix, $delimiter, $token-name, $space-map, $token-alias, $breakpoint-map) {
	// Base
	@each $props, $class in $space-map {
		@each $alias-key, $base-token in $token-alias {
			$value: var(--#{$prefix}-#{$token-name}-#{$alias-key});

			.#{$class}-#{$alias-key} {
				@if meta.type-of($props) == list {
					@each $prop in $props {
						#{$prop}: #{$value};
					}
				} @else {
					#{$props}: #{$value};
				}
			}
		}
	}

	// Responsive
	@each $breakpoint-key, $breakpoint-val in $breakpoint-map {
		@include breakpoint($breakpoint-key, $breakpoint-map) {
			@each $props, $class in $space-map {
				@each $alias-key, $base-token in $token-alias {
					$value: var(--#{$prefix}-#{$token-name}-#{$alias-key});

					.#{$breakpoint-key}#{$delimiter}#{$class}-#{$alias-key} {
					@if meta.type-of($props) == list {
						@each $prop in $props {
							#{$prop}: #{$value};
						}
					} @else {
						#{$props}: #{$value};
					}
					}
				}
			}
		}
	}
}

@mixin utilities-space-styles($map, $breakpoint-map) {
	@each $class, $properties in $map {
		.#{$class} {
		@each $prop, $responsive-values in $properties {
			@if map.has-key($responsive-values, base) {
				#{$prop}: map.get($responsive-values, base);
			}

			@each $breakpoint, $value in $responsive-values {
				@if $breakpoint != base {
				@include breakpoint($breakpoint, $breakpoint-map) {
					#{$prop}: $value;
				}
				}
			}
		}
		}
	}
}
